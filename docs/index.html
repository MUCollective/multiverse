<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Explorable Multiverse Data Analysis and Reports • multiverse</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Explorable Multiverse Data Analysis and Reports">
<meta property="og:description" content="Implement multiverse style analyses (Steegen S., Tuerlinckx F, Gelman A., Vanpaemal, W., 2016)
    &lt;doi:10.1177/1745691616658637&gt;, (Dragicevic P., Jansen Y., Sarma A., Kay M., Chevalier F., 2019) &lt;doi:10.1145/3290605.3300295&gt; 
    to show the robustness of statistical inference. Multiverse analysis is a philosophy of 
    statistical reporting where paper authors report the outcomes of many different statistical 
    analyses in order to show how fragile or robust their findings are. 
    The multiverse package (Sarma A., Kale A., Moon M., Taback N., Chevalier F., Hullman J., Kay M., 2021) &lt;doi:10.31219/osf.io/yfbwm&gt;
    allows users to concisely and flexibly implement multiverse-style 
    analysis, which involve declaring alternate ways of performing an analysis step, in R and R Notebooks.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">multiverse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/branch.html">A discussion on branches in the multiverse</a>
    </li>
    <li>
      <a href="articles/conditions.html">Declaring conditions in the multiverse</a>
    </li>
    <li>
      <a href="articles/dance.html">Example multiverse implementation: Recreating Adding inferential treatments to plots using Resampling and Animations using multiverse</a>
    </li>
    <li>
      <a href="articles/durante-multiverse-analysis.html">Example multiverse implementation: Effect of fertility on religiosity and political attitudes</a>
    </li>
    <li>
      <a href="articles/frequentist-multiverse-analysis.html">Example multiverse implementation: Re-evaluating the efficiency of physical visualizations</a>
    </li>
    <li>
      <a href="articles/hurricane.html">Example multiverse implementation: Female hurricanes are deadlier than male hurricanes</a>
    </li>
    <li>
      <a href="articles/multiverse-in-rmd.html">Using the multiverse in RMarkdown: Introduction to multiverse code chunks</a>
    </li>
    <li>
      <a href="articles/visualising-multiverse.html">Extracting and Visualising the results of a multiverse analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MUCollective/multiverse/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<!-- badges: end -->
<div id="multiverse-an-r-package-for-creating-multiverse-analysis" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#multiverse-an-r-package-for-creating-multiverse-analysis" class="anchor"></a>Multiverse: An R package for creating multiverse analysis</h1></div>
<p><code>multiverse</code> is an R package that allows users to specify multiverse of statistical analysis, also called a multiverse analysis. In a multiverse analysis, researchers identify sets of defensible analysis choices (e.g., different ways of excluding outliers, different data transformations), implement them all, and then report the outcomes of all analyses resulting from all possible choice combinations. However, declaring several alternative analysis paths can be tricky, often requiring custom control flows such as nested for-loops and multiple if-else statements. The <strong>goal</strong> of <code>multiverse</code> is to allow users to create multiverse analyses in a concise and easily interpretable manner. <code>multiverse</code> enables this by providing both an embedded Domain-Specific Language (DSL) as well as an API to interact with and extract results from a multiverse analysis, which can then be neatly wrapped within a larger analysis in R.</p>
<p>Steegen et al. first put forth the concept of <a href="https://journals.sagepub.com/doi/pdf/10.1177/1745691616658637">multiverse analysis</a>; Simonsohn et al. put forth a similar notion called the <a href="https://repository.upenn.edu/cgi/viewcontent.cgi?article=1314&amp;context=marketing_papers">Specification curve analysis</a>.</p>
<p>In a <code>multiverse</code> analysis, alternate analysis paths can arise from having points in the analysis where an analyst has to make a decision of choosing between two or more reasonable steps. We refer to these decision points as <strong>parameters</strong>, and they could be:</p>
<ul>
<li><p><strong>Data substitution parameters</strong> offer to switch between different raw datasets, either collected or simulated.</p></li>
<li><p><strong>Data processing parameters</strong> offer to process the same raw data in different ways before it is analysed.</p></li>
<li><p><strong>Modeling parameters</strong> offer different ways of analysing the same processed data</p></li>
<li><p><strong>Presentation parameters</strong> offer different ways of presenting analysis outcomes</p></li>
</ul>
<p>The <code>multiverse</code> documentation predominantly follows the tidyverse syntax</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the latest development version from GitHub with these R commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"mucollective/multiverse"</span><span class="op">)</span></code></pre></div>
</div>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>For details on how to quickly get started with this package, please refer to this document as well as the following vignettes:</p>
<ul>
<li>How <code>multiverse</code> can be used in different environments such as in RScripts and RMarkdown. See <code><a href="articles/multiverse-in-rmd.html">vignette("multiverse-in-rmd")</a></code>.</li>
<li>How alternate analysis paths can be declared in <code>multiverse</code> using branch. See <code><a href="articles/branch.html">vignette("branch")</a></code>.</li>
<li>How conditions can be declared in <code>multiverse</code> using conditions; conditions can be used to state when two steps in a multiverse are incompatible with one another. See <code><a href="articles/conditions.html">vignette("conditions")</a></code>.</li>
<li>How multiverse results can be extracted and visualised. . See <code><a href="articles/visualising-multiverse.html">vignette("visualising-multiverse")</a></code>.</li>
</ul>
<p>We also implement a series of end-to-end multiverse implementations using this package to demonstrate how it might be used (which can be found in the <a href="https://mucollective.github.io/multiverse/articles/">vignettes</a>):</p>
<ul>
<li>Steegen et al.’s <a href="https://journals.sagepub.com/doi/pdf/10.1177/1745691616658637">original multiverse analysis</a> of the paper <a href="https://doi.org/10.1177/0956797612466416">The fluctuating female vote: Politics, religion, and the ovulatory cycle</a>; can also be found <strong>below</strong>.</li>
<li>Simonsohn et al.’s <a href="http://dx.doi.org/10.2139/ssrn.2694998">specification curve analysis</a> of the paper <a href="https://doi.org/10.1073/pnas.1402786111">Female hurricanes are deadlier than male hurricanes</a>
</li>
<li>Dragicevic et al.’s mini-paper <a href="https://explorablemultiverse.github.io/examples/dance/">Adding Inferential Information to plots using Resampling and Animations</a> (from <a href="https://hal.inria.fr/hal-01976951/document">Increasing the transparency of research papers with explorable multiverse analyses</a> )</li>
<li>Dragicevic et al.’s mini-paper <a href="https://explorablemultiverse.github.io/examples/frequentist/">Re-evaluating the efficiency of Physical Visualisations</a> (from <a href="https://hal.inria.fr/hal-01976951/document">Increasing the transparency of research papers with explorable multiverse analyses</a> )</li>
</ul>
</div>
<div id="example-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#example-analysis" class="anchor"></a>Example analysis</h2>
<p>In this document, we outline an initial approach to conducting a multiverse analysis in R. We will show how our package can be used to perform the multiverse analysis outlined by Steegen et al. in <a href="https://journals.sagepub.com/doi/pdf/10.1177/1745691616658637">Increasing Transparency Through a Multiverse Analysis</a>.</p>
<p>Data analysis can involve several decisions involving two or more options. In most statistical analysis, these decisions are taken by the researcher based on some reasonable justification. However, for several decisions, there can be more than one reasonable options to choose from. A multiverse analysis is a form of analysis which makes all such decisions explicit and conducts the complete analysis for all combinations of options (of each decision).</p>
<p>Below, we first illustrate an example of a single analysis for a dataset. We will then extend it to a multiverse analysis.</p>
</div>
<div id="the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#the-data" class="anchor"></a>The data</h2>
<p>The first step is to read the raw data from the file and store it as a tibble. We will be following the <strong>tidy data</strong> format here. The data is provided with the package and can be loaded using the <code>data("durante)</code> command. In this example, we will use the data collected by <em>Durante et al.</em>, which investigated the effect of fertility on religiosity and political attitudes. We will focus on their second study (which we store in <code>df_durante</code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"durante"</span><span class="op">)</span>

<span class="va">df_durante</span> <span class="op">&lt;-</span> <span class="va">durante</span></code></pre></div>
<p>The data look like this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_durante</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="3%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="6%">
<col width="3%">
<col width="4%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="5%">
<col width="2%">
<col width="2%">
<col width="4%">
<col width="7%">
<col width="2%">
<col width="2%">
<col width="4%">
<col width="8%">
<col width="10%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="right">WorkerID</th>
<th align="right">Rel1</th>
<th align="right">Rel2</th>
<th align="right">Rel3</th>
<th align="right">Abortion</th>
<th align="right">Marriage</th>
<th align="right">StemCell</th>
<th align="right">RestrictAbortion</th>
<th align="right">Marijuana</th>
<th align="right">FreeMarket</th>
<th align="right">RichTax</th>
<th align="right">StLiving</th>
<th align="right">Profit</th>
<th align="right">PrivSocialSec</th>
<th align="right">Sure1</th>
<th align="right">Sure2</th>
<th align="right">Relationship</th>
<th align="right">ReportedCycleLength</th>
<th align="right">Vote</th>
<th align="right">Donate</th>
<th align="left">DateTesting</th>
<th align="left">StartDateofLastPeriod</th>
<th align="left">StartDateofPeriodBeforeLast</th>
<th align="left">StartDateNext</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">3</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">4</td>
<td align="right">28</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-05-18</td>
<td align="left">2012-04-18</td>
<td align="left">2012-06-15</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">9</td>
<td align="right">7</td>
<td align="right">3</td>
<td align="right">28</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-04-29</td>
<td align="left">2012-03-31</td>
<td align="left">2012-05-30</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">3</td>
<td align="right">27</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-21</td>
<td align="left">2012-05-04</td>
<td align="left">2012-04-07</td>
<td align="left">2012-05-31</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">7</td>
<td align="right">8</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">6</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">3</td>
<td align="right">37</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-21</td>
<td align="left">2012-04-27</td>
<td align="left">2012-03-22</td>
<td align="left">2012-06-05</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">9</td>
<td align="right">7</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">3</td>
<td align="right">38</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-04-19</td>
<td align="left">2012-03-09</td>
<td align="left">2012-05-25</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">2</td>
<td align="right">30</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">2012-05-22</td>
<td align="left">2012-04-21</td>
<td align="left">2012-03-20</td>
<td align="left">2012-05-22</td>
</tr>
</tbody>
</table>
</div>
<p>The original paper looked at the relationship between fertility, relationship status, and religiosity. But there are many reasonable ways to have defined each of these three variables from this dataset, so it is a good candidate for multiverse analysis.</p>
</div>
<div id="a-single-data-set-analysis-one-possible-analysis-among-many" class="section level2">
<h2 class="hasAnchor">
<a href="#a-single-data-set-analysis-one-possible-analysis-among-many" class="anchor"></a>A single data set analysis: one possible analysis among many</h2>
<p>The data collected needs to be processed before it can be modeled. Preparing the data set for analysis can involve several steps and decisions regarding how to encode the different raw values. The following is one example of data processing that can be performed for this study, where the original authors of the study compute, for each participant in their study, the typical duration of their menstrual cycle (<code>ComputedCycleNext</code>), the likely date of the next onset of their menstrual cycle (<code>NextMenstrualOnset</code>), the day of the cycle that they were in when taking the questionnaire (<code>CycleDay</code>); they also codify participants’ relationship status into a binary value (<code>Relationship</code>), and remove data which they believe might have been not captured accurately such as if the calculation of the length of menstrual cycle is either too short or too long (<code>ComputedCycleLength &gt; 25 &amp; ComputedCycleLength &lt; 35</code>), or if the participants were quite unsure of their responses (<code>Sure1 &lt;= 5 &amp; Sure2 &lt;= 5</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">one_universe</span> <span class="op">=</span> <span class="va">df_durante</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span> ComputedCycleLength <span class="op">=</span> <span class="va">StartDateofLastPeriod</span> <span class="op">-</span> <span class="va">StartDateofPeriodBeforeLast</span> <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span> NextMenstrualOnset <span class="op">=</span> <span class="va">StartDateofLastPeriod</span> <span class="op">+</span> <span class="va">ComputedCycleLength</span> <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>
    CycleDay <span class="op">=</span> <span class="fl">28</span> <span class="op">-</span> <span class="op">(</span><span class="va">NextMenstrualOnset</span> <span class="op">-</span> <span class="va">DateTesting</span><span class="op">)</span>,
    CycleDay <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">CycleDay</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">CycleDay</span> <span class="op">&lt;</span> <span class="fl">28</span>, <span class="va">CycleDay</span>, <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">CycleDay</span> <span class="op">&lt;</span> <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">28</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>
    RelationshipStatus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Relationship</span><span class="op">==</span><span class="fl">1</span> <span class="op">|</span> <span class="va">Relationship</span><span class="op">==</span><span class="fl">2</span>, <span class="st">"Single"</span>, <span class="st">"Relationship"</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span> <span class="va">ComputedCycleLength</span> <span class="op">&gt;</span> <span class="fl">25</span> <span class="op">&amp;</span> <span class="va">ComputedCycleLength</span> <span class="op">&lt;</span> <span class="fl">35</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span> <span class="va">Sure1</span> <span class="op">&gt;</span> <span class="fl">6</span> <span class="op">|</span> <span class="va">Sure2</span> <span class="op">&gt;</span> <span class="fl">6</span> <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span> Fertility <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">CycleDay</span> <span class="op">&gt;=</span> <span class="fl">7</span> <span class="op">&amp;</span> <span class="va">CycleDay</span> <span class="op">&lt;=</span> <span class="fl">14</span>, <span class="st">"high"</span>, <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">CycleDay</span> <span class="op">&gt;=</span> <span class="fl">17</span> <span class="op">&amp;</span> <span class="va">CycleDay</span> <span class="op">&lt;=</span> <span class="fl">25</span>, <span class="st">"low"</span>, <span class="st">"medium"</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span> <span class="op">)</span></code></pre></div>
<p>The transformed data for this one universe looks like this:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">one_universe</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span> <span class="va">NextMenstrualOnset</span>, <span class="va">Relationship</span>, <span class="va">Sure1</span>, <span class="va">Sure2</span>, <span class="va">Fertility</span>, <span class="fu">everything</span><span class="op">(</span><span class="op">)</span> <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="5%">
<col width="3%">
<col width="1%">
<col width="1%">
<col width="3%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="4%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="4%">
<col width="5%">
<col width="1%">
<col width="2%">
<col width="3%">
<col width="6%">
<col width="7%">
<col width="4%">
<col width="5%">
<col width="2%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">NextMenstrualOnset</th>
<th align="right">Relationship</th>
<th align="right">Sure1</th>
<th align="right">Sure2</th>
<th align="left">Fertility</th>
<th align="right">WorkerID</th>
<th align="right">Rel1</th>
<th align="right">Rel2</th>
<th align="right">Rel3</th>
<th align="right">Abortion</th>
<th align="right">Marriage</th>
<th align="right">StemCell</th>
<th align="right">RestrictAbortion</th>
<th align="right">Marijuana</th>
<th align="right">FreeMarket</th>
<th align="right">RichTax</th>
<th align="right">StLiving</th>
<th align="right">Profit</th>
<th align="right">PrivSocialSec</th>
<th align="right">ReportedCycleLength</th>
<th align="right">Vote</th>
<th align="right">Donate</th>
<th align="left">DateTesting</th>
<th align="left">StartDateofLastPeriod</th>
<th align="left">StartDateofPeriodBeforeLast</th>
<th align="left">StartDateNext</th>
<th align="left">ComputedCycleLength</th>
<th align="right">CycleDay</th>
<th align="left">RelationshipStatus</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2012-06-17</td>
<td align="right">4</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="left">medium</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">3</td>
<td align="right">28</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-05-18</td>
<td align="left">2012-04-18</td>
<td align="left">2012-06-15</td>
<td align="left">30 days</td>
<td align="right">2</td>
<td align="left">Relationship</td>
</tr>
<tr class="even">
<td align="left">2012-05-28</td>
<td align="right">3</td>
<td align="right">9</td>
<td align="right">7</td>
<td align="left">low</td>
<td align="right">2</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">28</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-04-29</td>
<td align="left">2012-03-31</td>
<td align="left">2012-05-30</td>
<td align="left">29 days</td>
<td align="right">22</td>
<td align="left">Relationship</td>
</tr>
<tr class="odd">
<td align="left">2012-05-31</td>
<td align="right">3</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="left">low</td>
<td align="right">3</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">27</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-21</td>
<td align="left">2012-05-04</td>
<td align="left">2012-04-07</td>
<td align="left">2012-05-31</td>
<td align="left">27 days</td>
<td align="right">18</td>
<td align="left">Relationship</td>
</tr>
<tr class="even">
<td align="left">2012-05-23</td>
<td align="right">2</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="left">medium</td>
<td align="right">6</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">30</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">2012-05-22</td>
<td align="left">2012-04-21</td>
<td align="left">2012-03-20</td>
<td align="left">2012-05-22</td>
<td align="left">32 days</td>
<td align="right">27</td>
<td align="left">Single</td>
</tr>
<tr class="odd">
<td align="left">2012-05-31</td>
<td align="right">4</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="left">low</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">7</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">28</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-05-03</td>
<td align="left">2012-04-05</td>
<td align="left">2012-05-31</td>
<td align="left">28 days</td>
<td align="right">19</td>
<td align="left">Relationship</td>
</tr>
<tr class="even">
<td align="left">2012-06-15</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="left">medium</td>
<td align="right">11</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">30</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-24</td>
<td align="left">2012-05-18</td>
<td align="left">2012-04-20</td>
<td align="left">2012-06-17</td>
<td align="left">28 days</td>
<td align="right">6</td>
<td align="left">Single</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">one_universe</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Relationship</span>, y <span class="op">=</span> <span class="va">Rel1</span> <span class="op">+</span> <span class="va">Rel2</span> <span class="op">+</span> <span class="va">Rel3</span>, color <span class="op">=</span> <span class="va">Fertility</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">stat_summary</span><span class="op">(</span>position <span class="op">=</span> <span class="fu">position_dodge</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span>, fun.data <span class="op">=</span> <span class="st">"mean_se"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/universe-summary-1.png" alt="results from a single analysis: point estimates and 95% confidence intervals of the coefficients of the predictors relationship and single"></p>
<p>However, there also exists other valid processing options: instead of calculating <code>NextMenstrualOnset = StartDateofLastPeriod + ComputedCycleLength</code>, it can also be calculated as <code>StartDateofLastPeriod + ReportedCycleLength</code>. Such alternate processing options can exist for several decisions that a researcher makes in the data processing, analysis and presentation stages. This can thus result in a <em>multiverse of analysis</em>, with the one described above representing a single <em>universe</em>.</p>
<p>How would one declare such different alternate ways of calculation easily and efficiently? Below, we describe how our package allows you to make such declarations with ease.</p>
</div>
<div id="multiverse-specification" class="section level2">
<h2 class="hasAnchor">
<a href="#multiverse-specification" class="anchor"></a>Multiverse specification</h2>
<p><code>multiverse</code> provides flexible functions which can be used to easily multiplex over alternative analysis steps, and perform a multiverse analysis.</p>
<p>The first step is to define a <em>new multiverse</em>. We will use the multiverse object to create a set of universes, each representing a different way of analysing our data.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">M</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/multiverse.html">multiverse</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div id="two-ways-to-building-a-multiverse" class="section level3">
<h3 class="hasAnchor">
<a href="#two-ways-to-building-a-multiverse" class="anchor"></a>Two ways to building a multiverse</h3>
<p>The <code>multiverse</code> enables the users to declare alternative analysis using a embedded DSL, the syntax for which closely resembles R and tidyverse syntax. However, this DSL cannot be executed directly in R and needs to be declared, processed and executed in a special environment. To be more precise, <code>multiverse</code> takes the user declared code in the DSL form, parses the abstract syntax tree, and rewrites the code into multiple versions of valid R code corresponding to each universe in the multiverse.</p>
<p>To get around these limitations, we declare this code “inside the multiverse object”. In the <code>multiverse</code> package, we support this declaration in two ways:</p>
<ul>
<li>using <em>multiverse code chunks</em>, which allow users to declare multiverse code in a dedicated code chunk, and is more consistent with the interactive programming interface of RStudio.</li>
<li>using the <code><a href="reference/inside.html">inside()</a></code> function. The inside function which allows users to declare multiverse code in RScripts or regular R code blocks, and is more suited for a script-style implementation.</li>
</ul>
<p><strong>Note</strong> that the <code>inside</code> function is more suited for a script-style implementation. Keeping consistency with the interactive programming interface of RStudio, we also offer the user a <code>multiverse code block</code> which can be used instead of the <code>r</code> code block to write code inside a multiverse object (see for more details on using the multiverse with RMarkdown).</p>
<div id="multiverse-code-blocks" class="section level4">
<h4 class="hasAnchor">
<a href="#multiverse-code-blocks" class="anchor"></a>Multiverse code blocks</h4>
<p>We can use the <a href="https://mucollective.github.io/multiverse/articles/multiverse-in-rmd.html"><em>multiverse code blocks</em></a> instead of the regular <code>r</code> code block to write code inside a multiverse object (see for more details on using the multiverse code blocks with RMarkdown). This allows you to write more concise code and is more consistent with the interactive programming interface of RStudio. A <em>multiverse code block</em> is a custom engine designed to work with the <code>multiverse</code> package, to implement the multiverse analyses. Below we show how code can be implemented using the <em>multiverse code block</em></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{multiverse default-m-1, inside = M}</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="at"># here we just create the variable </span><span class="st">`</span>df<span class="st">`</span><span class="at"> in the multiverse</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="at">df &lt;- df_durante</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="at"># here, we perform two </span><span class="st">`</span>mutate<span class="st">`</span><span class="at"> operations in the multiverse.</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="at"># although they could have been chained, this illustrates </span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="at"># how multiple variables can be declared together using the </span><span class="st">`</span>{}<span class="st">`</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="at">df &lt;- df_durante %&gt;%</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="at">  mutate( ComputedCycleLength = StartDateofLastPeriod - StartDateofPeriodBeforeLast ) %&gt;%</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="at">  mutate( NextMenstrualOnset = branch(menstrual_calculation, </span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="at">    "mc_option1" ~ StartDateofLastPeriod + ComputedCycleLength,</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="at">    "mc_option2" ~ StartDateofLastPeriod + ReportedCycleLength,</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="at">    "mc_option3" ~ StartDateNext)</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p>The code within the second <code>mutate</code> function call is written in the <code>multiverse</code> DSL and cannot be executed directly in R. For now, ignore what the <code>branch</code> function does as we will discuss about this in more detail in the next section</p>
<p>We provide the ability to declare multiverse code block as an <em>Addin</em> in RStudio. Users can click on <em>Addins</em> toolbar menu in RStudio (see the image below). This would create a multiverse code block at the location of the cursor in the document.</p>
<p><img src="articles/multiverse-addins.png" width="90%"></p>
<p>Alternately, users can insert a multiverse code block using a keyboard shortcut. Users can create a keyboard shortcut to declare a multiverse code block inside a RMarkdown document through the following steps:</p>
<ul>
<li>Tools &gt; Addins &gt; Browse Addins… &gt; Keyboard Shortcuts</li>
<li>Next, in the filter input field, type <em>multiverse</em>. You will see one result with “Insert multiverse code chunk” as the name.</li>
<li>Click on the Shortcut field and press Cmd+Option+M (on Mac OS) or Ctrl+Shift+Alt+M (on Windows).</li>
<li>Click “Apply” and exit the dialog box</li>
</ul>
<p>Please refer to for more details on using the multiverse code blocks with RMarkdown.</p>
</div>
<div id="inside" class="section level4">
<h4 class="hasAnchor">
<a href="#inside" class="anchor"></a><code>inside()</code>
</h4>
<p>Alternatively, we can use regular <code>r</code> code blocks instead of the regular to write code inside a multiverse object The <code><a href="reference/inside.html">inside()</a></code> function takes in two arguments: 1. the multiverse object, M; and 2. the code for the analysis (including branches). Note that if you are passing multiple expressions, they should be enclosed within <code>{}</code>.</p>
<p>Note that <code><a href="reference/inside.html">inside()</a></code> is primarily designed for script style programming. If a user is working with an RScript, the previous code can be declared “inside the multiverse object” using the <code><a href="reference/inside.html">inside()</a></code> function as follows:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># here we just create the variable `df` in the multiverse</span>
<span class="fu"><a href="reference/inside.html">inside</a></span><span class="op">(</span><span class="va">M</span>, <span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df_durante</span><span class="op">)</span>

<span class="co"># here, we perform two `mutate` operations in the multiverse.</span>
<span class="co"># although they could have been chained, this illustrates </span>
<span class="co"># how multiple variables can be declared together using the `{}`</span>
<span class="fu"><a href="reference/inside.html">inside</a></span><span class="op">(</span><span class="va">M</span>, <span class="op">{</span>
  <span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span>
    <span class="fu">mutate</span><span class="op">(</span> ComputedCycleLength <span class="op">=</span> <span class="va">StartDateofLastPeriod</span> <span class="op">-</span> <span class="va">StartDateofPeriodBeforeLast</span> <span class="op">)</span>
  
  <span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span>
    <span class="fu">mutate</span><span class="op">(</span> NextMenstrualOnset <span class="op">=</span> <span class="fu"><a href="reference/branch.html">branch</a></span><span class="op">(</span><span class="va">menstrual_calculation</span>, 
      <span class="st">"mc_option1"</span> <span class="op">~</span> <span class="va">StartDateofLastPeriod</span> <span class="op">+</span> <span class="va">ComputedCycleLength</span>,
      <span class="st">"mc_option2"</span> <span class="op">~</span> <span class="va">StartDateofLastPeriod</span> <span class="op">+</span> <span class="va">ReportedCycleLength</span>,
      <span class="st">"mc_option3"</span> <span class="op">~</span> <span class="va">StartDateNext</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>In the rest of this vignette, we will use <strong>multiverse code blocks</strong> to specify the multiverse. Please refer to the vignette (<code><a href="articles/multiverse-in-rmd.html">vignette("multiverse-in-rmd")</a></code>) for more details on <strong>declaring multiverse analyses in RScripts and RMarkdown</strong></p>
</div>
</div>
<div id="declaring-alternative-analyses" class="section level3">
<h3 class="hasAnchor">
<a href="#declaring-alternative-analyses" class="anchor"></a>Declaring alternative analyses</h3>
<p>Coming back to the analysis, the next step is to define our possible alternate analysis paths. The <code>multiverse</code> package includes functions that aim to make it easy to multiplex over these alternative analysis steps and write multiverse analyses. We do this by enabling analysts to declare code using syntax which is as close to that of a single universe analysis as possible.</p>
<p>Consider these first few lines from the transformation code in the single analysis above:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df_durante</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>ComputedCycleLength <span class="op">=</span> <span class="va">StartDateofLastPeriod</span> <span class="op">-</span> <span class="va">StartDateofPeriodBeforeLast</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>NextMenstrualOnset <span class="op">=</span> <span class="va">StartDateofLastPeriod</span> <span class="op">+</span> <span class="va">ComputedCycleLength</span><span class="op">)</span></code></pre></div>
<p>But <code>NextMenstrualOnset</code> could be calculated in at least two other reasonable ways:</p>
<ul>
<li><code>NextMenstrualOnset = StartDateofLastPeriod + ReportedCycleLength</code></li>
<li><code>NextMenstrualOnset = StartDateNext</code></li>
</ul>
<p>To create a multiverse that includes these three possible processing options, we can use the <code><a href="reference/branch.html">branch()</a></code> function. The <code><a href="reference/branch.html">branch()</a></code> function accepts three or more arguments. The first argument defines a <em>parameter</em> (here <code>menstrual_calculation</code>) which is used as an identifier for the decision point. The subsequent arguments define the different <em>options</em> that the parameter can take which can optionally be named. Each option defines the different choices that a researcher can make at that decision point of their analysis. Here, the researcher declares three ways of computing the variable <code>NextMenstrualOnset</code>. Each option can be named (here, <code>"mc_option1"</code>, <code>"mc_option2"</code>, <code>"mc_option3"</code>); however, names can be omitted. We strongly recommend naming the branches with meaningful names to help the user keep track of choices. If omitted, the entire syntax for performing that operation will be treated as the name for that particular option.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{multiverse parameter_options, inside = M}</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="at"># here, we perform two </span><span class="st">`</span>mutate<span class="st">`</span><span class="at"> operations in the multiverse.</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="at"># although they could have been chained, this illustrates </span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at"># how multiple variables can be declared together using the </span><span class="st">`</span>{}<span class="st">`</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="at">df &lt;- df_durante %&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="at">  mutate( ComputedCycleLength = StartDateofLastPeriod - StartDateofPeriodBeforeLast ) %&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="at">  mutate( NextMenstrualOnset = branch(menstrual_calculation, </span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="at">    "mc_option1" ~ StartDateofLastPeriod + ComputedCycleLength,</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="at">    "mc_option2" ~ StartDateofLastPeriod + ReportedCycleLength,</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="at">    "mc_option3" ~ StartDateNext)</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="at">  )</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p>More details on the <code><a href="reference/branch.html">branch()</a></code> function can be found in the corresponding <code>vignette(branch)</code>.</p>
</div>
</div>
<div id="the-multiverse-with-declared-code-and-branches" class="section level2">
<h2 class="hasAnchor">
<a href="#the-multiverse-with-declared-code-and-branches" class="anchor"></a>The multiverse, with declared code and branches</h2>
<p>Once you add the code to the multiverse, it automatically parses the code to identify the <code>parameters</code> and the corresponding <code>options</code> that have been defined for each parameter.</p>
<p>Once the code has been added, the <code>multiverse</code> object will have the following attributes:</p>
<ol>
<li>
<code>parameters</code>, which is a list of parameters</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/accessors.html">parameters</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span>
<span class="co">#&gt; $menstrual_calculation</span>
<span class="co">#&gt; $menstrual_calculation[[1]]</span>
<span class="co">#&gt; [1] "mc_option1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $menstrual_calculation[[2]]</span>
<span class="co">#&gt; [1] "mc_option2"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $menstrual_calculation[[3]]</span>
<span class="co">#&gt; [1] "mc_option3"</span></code></pre></div>
<ol>
<li>
<code>conditions</code>, which is a list of conditions (we’ll define this later)</li>
<li>
<code>expand</code>, which is a tibble consisting of all possible combination of values for the multiverse</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/accessors.html">expand</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">.code</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<table class="table">
<thead><tr class="header">
<th align="right">.universe</th>
<th align="left">menstrual_calculation</th>
<th align="left">.parameter_assignment</th>
<th align="left">.results</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">mc_option1</td>
<td align="left">mc_option1</td>
<td align="left">&lt;environment: 0x7fb6158f41d0&gt;</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">mc_option2</td>
<td align="left">mc_option2</td>
<td align="left">&lt;environment: 0x7fb615927a68&gt;</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">mc_option3</td>
<td align="left">mc_option3</td>
<td align="left">&lt;environment: 0x7fb615943748&gt;</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li>
<code>code</code>, which is the code that the user passes to the multiverse to conduct a multiverse analysis. However, we do not execute this code and it is stored unevaluated. The user can interactively edit and rewrite this code, and can execute it for the current analysis or the entire multiverse using dedicated functions.</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/accessors.html">code</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span>
<span class="co">#&gt; $parameter_options</span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     df &lt;- df_durante %&gt;% mutate(ComputedCycleLength = StartDateofLastPeriod - </span>
<span class="co">#&gt;         StartDateofPeriodBeforeLast) %&gt;% mutate(NextMenstrualOnset = branch(menstrual_calculation, </span>
<span class="co">#&gt;         "mc_option1" ~ StartDateofLastPeriod + ComputedCycleLength, </span>
<span class="co">#&gt;         "mc_option2" ~ StartDateofLastPeriod + ReportedCycleLength, </span>
<span class="co">#&gt;         "mc_option3" ~ StartDateNext))</span>
<span class="co">#&gt; }</span></code></pre></div>
</div>
<div id="running-a-single-analysis-from-the-multiverse" class="section level2">
<h2 class="hasAnchor">
<a href="#running-a-single-analysis-from-the-multiverse" class="anchor"></a>Running a single analysis from the multiverse</h2>
<p>At this point, we have defined three possible processing options (three universes) in our multiverse. Keeping consistency with the interactive programming interface of RStudio, we also execute the default analysis in each step. In the previous step, we stored the results in the variable <code>df</code>. We can see the result of the default analysis in the multiverse by accessing the data frame from the multiverse object as shown:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">M</span><span class="op">$</span><span class="va">df</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="3%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="5%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="3%">
<col width="2%">
<col width="4%">
<col width="2%">
<col width="2%">
<col width="4%">
<col width="6%">
<col width="1%">
<col width="2%">
<col width="4%">
<col width="7%">
<col width="8%">
<col width="4%">
<col width="6%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="right">WorkerID</th>
<th align="right">Rel1</th>
<th align="right">Rel2</th>
<th align="right">Rel3</th>
<th align="right">Abortion</th>
<th align="right">Marriage</th>
<th align="right">StemCell</th>
<th align="right">RestrictAbortion</th>
<th align="right">Marijuana</th>
<th align="right">FreeMarket</th>
<th align="right">RichTax</th>
<th align="right">StLiving</th>
<th align="right">Profit</th>
<th align="right">PrivSocialSec</th>
<th align="right">Sure1</th>
<th align="right">Sure2</th>
<th align="right">Relationship</th>
<th align="right">ReportedCycleLength</th>
<th align="right">Vote</th>
<th align="right">Donate</th>
<th align="left">DateTesting</th>
<th align="left">StartDateofLastPeriod</th>
<th align="left">StartDateofPeriodBeforeLast</th>
<th align="left">StartDateNext</th>
<th align="left">ComputedCycleLength</th>
<th align="left">NextMenstrualOnset</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">3</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">4</td>
<td align="right">28</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-05-18</td>
<td align="left">2012-04-18</td>
<td align="left">2012-06-15</td>
<td align="left">30 days</td>
<td align="left">2012-06-15</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">9</td>
<td align="right">7</td>
<td align="right">3</td>
<td align="right">28</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-04-29</td>
<td align="left">2012-03-31</td>
<td align="left">2012-05-30</td>
<td align="left">29 days</td>
<td align="left">2012-05-30</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">3</td>
<td align="right">27</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-21</td>
<td align="left">2012-05-04</td>
<td align="left">2012-04-07</td>
<td align="left">2012-05-31</td>
<td align="left">27 days</td>
<td align="left">2012-05-31</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">7</td>
<td align="right">8</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">6</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">3</td>
<td align="right">37</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-21</td>
<td align="left">2012-04-27</td>
<td align="left">2012-03-22</td>
<td align="left">2012-06-05</td>
<td align="left">36 days</td>
<td align="left">2012-06-05</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">9</td>
<td align="right">7</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">3</td>
<td align="right">38</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-04-19</td>
<td align="left">2012-03-09</td>
<td align="left">2012-05-25</td>
<td align="left">41 days</td>
<td align="left">2012-05-25</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">2</td>
<td align="right">30</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">2012-05-22</td>
<td align="left">2012-04-21</td>
<td align="left">2012-03-20</td>
<td align="left">2012-05-22</td>
<td align="left">32 days</td>
<td align="left">2012-05-22</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="a-multiverse-with-all-possible-combinations-specified" class="section level2">
<h2 class="hasAnchor">
<a href="#a-multiverse-with-all-possible-combinations-specified" class="anchor"></a>A multiverse with all possible combinations specified</h2>
<p>Besides calculating the onset of the next menstruation cycle, there are other variables which have multiple valid and reasonable processing options. According to Steegen et al., these include defining <code>Relationship</code> and <code>Fertility</code>, and exclusion criteria based on the values for cycle length and certainty of responses. The next code chunk illustrates how this can be added to the multiverse object defined above.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{multiverse default-m-2 inside = M}</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="at">df &lt;- df %&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="at">    mutate(Relationship = branch( relationship_status, </span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">      "rs_option1" ~ factor(ifelse(Relationship==1 | Relationship==2, 'Single', 'Relationship')),</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="at">      "rs_option2" ~ factor(ifelse(Relationship==1, 'Single', 'Relationship')),</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="at">      "rs_option3" ~ factor(ifelse(Relationship==1, 'Single', ifelse(Relationship==3 | Relationship==4, 'Relationship', NA))) )</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="at">    ) %&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="at">    mutate(</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="at">      CycleDay = 28 - (NextMenstrualOnset - DateTesting),</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="at">      CycleDay = ifelse(CycleDay &gt; 1 &amp; CycleDay &lt; 28, CycleDay, ifelse(CycleDay &lt; 1, 1, 28))</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="at">    ) %&gt;%</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="at">    filter( branch(cycle_length, </span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="at">      "cl_option1" ~ TRUE,</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="at">      "cl_option2" ~ ComputedCycleLength &gt; 25 &amp; ComputedCycleLength &lt; 35,</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="at">      "cl_option3" ~ ReportedCycleLength &gt; 25 &amp; ReportedCycleLength &lt; 35</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="at">    )) %&gt;%</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="at">    filter( branch(certainty,</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="at">        "cer_option1" ~ TRUE,</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="at">        "cer_option2" ~ Sure1 &gt; 6 | Sure2 &gt; 6</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="at">    )) %&gt;%</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="at">    mutate( Fertility = branch( fertile,</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="at">        "fer_option1" ~ factor( ifelse(CycleDay &gt;= 7 &amp; CycleDay &lt;= 14, "high", ifelse(CycleDay &gt;= 17 &amp; CycleDay &lt;= 25, "low", "medium")) ),</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="at">        "fer_option2" ~ factor( ifelse(CycleDay &gt;= 6 &amp; CycleDay &lt;= 14, "high", ifelse(CycleDay &gt;= 17 &amp; CycleDay &lt;= 27, "low", "medium")) ),</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="at">        "fer_option3" ~ factor( ifelse(CycleDay &gt;= 9 &amp; CycleDay &lt;= 17, "high", ifelse(CycleDay &gt;= 18 &amp; CycleDay &lt;= 25, "low", "medium")) ),</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="at">        "fer_option4" ~ factor( ifelse(CycleDay &gt;= 8 &amp; CycleDay &lt;= 14, "high", "low") ),</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="at">        "fer_option5" ~ factor( ifelse(CycleDay &gt;= 8 &amp; CycleDay &lt;= 17, "high", "low") )</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="at">    ))</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="at">})</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p>Since the multiverse object has already been created and the one parameter has already been defined, this will simply add to the previous code:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/accessors.html">code</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span>
<span class="co">#&gt; $parameter_options</span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     df &lt;- df_durante %&gt;% mutate(ComputedCycleLength = StartDateofLastPeriod - </span>
<span class="co">#&gt;         StartDateofPeriodBeforeLast) %&gt;% mutate(NextMenstrualOnset = branch(menstrual_calculation, </span>
<span class="co">#&gt;         "mc_option1" ~ StartDateofLastPeriod + ComputedCycleLength, </span>
<span class="co">#&gt;         "mc_option2" ~ StartDateofLastPeriod + ReportedCycleLength, </span>
<span class="co">#&gt;         "mc_option3" ~ StartDateNext))</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`default-m-2`</span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     df &lt;- df %&gt;% mutate(RelationshipStatus = branch(relationship_status, </span>
<span class="co">#&gt;         "rs_option1" ~ factor(ifelse(Relationship == 1 | Relationship == </span>
<span class="co">#&gt;             2, "Single", "Relationship")), "rs_option2" ~ factor(ifelse(Relationship == </span>
<span class="co">#&gt;             1, "Single", "Relationship")), "rs_option3" ~ factor(ifelse(Relationship == </span>
<span class="co">#&gt;             1, "Single", ifelse(Relationship == 3 | Relationship == </span>
<span class="co">#&gt;             4, "Relationship", NA))))) %&gt;% mutate(CycleDay = 28 - </span>
<span class="co">#&gt;         (NextMenstrualOnset - DateTesting), CycleDay = ifelse(CycleDay &gt; </span>
<span class="co">#&gt;         1 &amp; CycleDay &lt; 28, CycleDay, ifelse(CycleDay &lt; 1, 1, </span>
<span class="co">#&gt;         28))) %&gt;% filter(branch(cycle_length, "cl_option1" ~ </span>
<span class="co">#&gt;         TRUE, "cl_option2" ~ ComputedCycleLength &gt; 25 &amp; ComputedCycleLength &lt; </span>
<span class="co">#&gt;         35, "cl_option3" ~ ReportedCycleLength &gt; 25 &amp; ReportedCycleLength &lt; </span>
<span class="co">#&gt;         35)) %&gt;% filter(branch(certainty, "cer_option1" ~ TRUE, </span>
<span class="co">#&gt;         "cer_option2" ~ Sure1 &gt; 6 | Sure2 &gt; 6)) %&gt;% mutate(Fertility = branch(fertile, </span>
<span class="co">#&gt;         "fer_option1" ~ factor(ifelse(CycleDay &gt;= 7 &amp; CycleDay &lt;= </span>
<span class="co">#&gt;             14, "high", ifelse(CycleDay &gt;= 17 &amp; CycleDay &lt;= 25, </span>
<span class="co">#&gt;             "low", "medium"))), "fer_option2" ~ factor(ifelse(CycleDay &gt;= </span>
<span class="co">#&gt;             6 &amp; CycleDay &lt;= 14, "high", ifelse(CycleDay &gt;= 17 &amp; </span>
<span class="co">#&gt;             CycleDay &lt;= 27, "low", "medium"))), "fer_option3" ~ </span>
<span class="co">#&gt;             factor(ifelse(CycleDay &gt;= 9 &amp; CycleDay &lt;= 17, "high", </span>
<span class="co">#&gt;                 ifelse(CycleDay &gt;= 18 &amp; CycleDay &lt;= 25, "low", </span>
<span class="co">#&gt;                   "medium"))), "fer_option4" ~ factor(ifelse(CycleDay &gt;= </span>
<span class="co">#&gt;             8 &amp; CycleDay &lt;= 14, "high", "low")), "fer_option5" ~ </span>
<span class="co">#&gt;             factor(ifelse(CycleDay &gt;= 8 &amp; CycleDay &lt;= 17, "high", </span>
<span class="co">#&gt;                 "low"))))</span>
<span class="co">#&gt; }</span></code></pre></div>
<p>The <code>expand</code> function will contain all the possible combinations of the parameter options that have been identified.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/accessors.html">expand</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">.code</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="5%">
<col width="11%">
<col width="10%">
<col width="7%">
<col width="6%">
<col width="6%">
<col width="33%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th align="right">.universe</th>
<th align="left">menstrual_calculation</th>
<th align="left">relationship_status</th>
<th align="left">cycle_length</th>
<th align="left">certainty</th>
<th align="left">fertile</th>
<th align="left">.parameter_assignment</th>
<th align="left">.results</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option1</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option1</td>
<td align="left">&lt;environment: 0x7fb615fb49b0&gt;</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option2</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option2</td>
<td align="left">&lt;environment: 0x7fb6180cf5a8&gt;</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option3</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option3</td>
<td align="left">&lt;environment: 0x7fb61817a7d0&gt;</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option4</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option4</td>
<td align="left">&lt;environment: 0x7fb618294aa8&gt;</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option5</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option5</td>
<td align="left">&lt;environment: 0x7fb618314108&gt;</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option2</td>
<td align="left">fer_option1</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option2, fer_option1</td>
<td align="left">&lt;environment: 0x7fb618390258&gt;</td>
</tr>
</tbody>
</table>
</div>
<p>In our multiverse we have identified 5 options for calculating <code>fertility</code>, 3 options for calculating <code>menstrual calculation</code> and <code>relationship status</code> each, 3 wyas of excluding participants based on their <code>cycle length</code> and 2 ways of excluding participants based on the self-reported <code>certainty</code> of their responses.</p>
<p>This results in $ 5 = 270$ possible combinations.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/accessors.html">expand</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 270</span></code></pre></div>
<p>We can then inspect the default analysis the default single universe analysis from this multiverse:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">M</span><span class="op">$</span><span class="va">df</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="4%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="4%">
<col width="1%">
<col width="1%">
<col width="3%">
<col width="5%">
<col width="1%">
<col width="2%">
<col width="3%">
<col width="6%">
<col width="7%">
<col width="4%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="2%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="right">WorkerID</th>
<th align="right">Rel1</th>
<th align="right">Rel2</th>
<th align="right">Rel3</th>
<th align="right">Abortion</th>
<th align="right">Marriage</th>
<th align="right">StemCell</th>
<th align="right">RestrictAbortion</th>
<th align="right">Marijuana</th>
<th align="right">FreeMarket</th>
<th align="right">RichTax</th>
<th align="right">StLiving</th>
<th align="right">Profit</th>
<th align="right">PrivSocialSec</th>
<th align="right">Sure1</th>
<th align="right">Sure2</th>
<th align="right">Relationship</th>
<th align="right">ReportedCycleLength</th>
<th align="right">Vote</th>
<th align="right">Donate</th>
<th align="left">DateTesting</th>
<th align="left">StartDateofLastPeriod</th>
<th align="left">StartDateofPeriodBeforeLast</th>
<th align="left">StartDateNext</th>
<th align="left">ComputedCycleLength</th>
<th align="left">NextMenstrualOnset</th>
<th align="left">RelationshipStatus</th>
<th align="right">CycleDay</th>
<th align="left">Fertility</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">3</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">4</td>
<td align="right">28</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-05-18</td>
<td align="left">2012-04-18</td>
<td align="left">2012-06-15</td>
<td align="left">30 days</td>
<td align="left">2012-06-15</td>
<td align="left">Relationship</td>
<td align="right">4</td>
<td align="left">low</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">9</td>
<td align="right">7</td>
<td align="right">3</td>
<td align="right">28</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-04-29</td>
<td align="left">2012-03-31</td>
<td align="left">2012-05-30</td>
<td align="left">29 days</td>
<td align="left">2012-05-30</td>
<td align="left">Relationship</td>
<td align="right">20</td>
<td align="left">low</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">3</td>
<td align="right">27</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-21</td>
<td align="left">2012-05-04</td>
<td align="left">2012-04-07</td>
<td align="left">2012-05-31</td>
<td align="left">27 days</td>
<td align="left">2012-05-31</td>
<td align="left">Relationship</td>
<td align="right">18</td>
<td align="left">low</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">2</td>
<td align="right">30</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">2012-05-22</td>
<td align="left">2012-04-21</td>
<td align="left">2012-03-20</td>
<td align="left">2012-05-22</td>
<td align="left">32 days</td>
<td align="left">2012-05-22</td>
<td align="left">NA</td>
<td align="right">28</td>
<td align="left">low</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">7</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">4</td>
<td align="right">28</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-22</td>
<td align="left">2012-05-03</td>
<td align="left">2012-04-05</td>
<td align="left">2012-05-31</td>
<td align="left">28 days</td>
<td align="left">2012-05-31</td>
<td align="left">Relationship</td>
<td align="right">19</td>
<td align="left">low</td>
</tr>
<tr class="even">
<td align="right">11</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">1</td>
<td align="right">30</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-05-24</td>
<td align="left">2012-05-18</td>
<td align="left">2012-04-20</td>
<td align="left">2012-06-17</td>
<td align="left">28 days</td>
<td align="left">2012-06-17</td>
<td align="left">Single</td>
<td align="right">4</td>
<td align="left">low</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="specifying-conditions-in-the-multiverse-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-conditions-in-the-multiverse-analysis" class="anchor"></a>Specifying conditions in the multiverse analysis</h2>
<p>In our example, we are excluding participants based on their <em>cycle length</em>. This can be done in two ways: we can use the values of the variable,<code>ComputedCycleLength</code> or <code>ReportedCycleLength</code>. If we are using <code>ComputedCycleLength</code> to exclude participants, this means that we should not calculate the variable <code>NextMenstrualOnset</code> (date for the onset of the next menstrual cycle) using the <code>ReportedCycleLength</code> value. Similarly, if we are using <code>ReportedCycleLength</code> to exclude participants it is inconsistent to calculate <code>NextMenstrualOnset</code> using <code>ComputedCycleLength</code>. In a multiverse analysis, it may occur that the value of one variable might depend on the value of another variable defined previously.</p>
<p>We should be able to express these conditions in the multiverse. We show how this can be done, as well as other details on <code>conditions</code>, in the corresponding <code>vignette(conditions)</code>.</p>
</div>
<div id="modeling" class="section level2">
<h2 class="hasAnchor">
<a href="#modeling" class="anchor"></a>Modeling</h2>
<p>Steegen et al. define a multiverse which only considers the various data processing parameters, which we have defined above. To analyse the data, they create 6 models. The first model uses data from example #1. The other five models use the data from example #2, which we’ve using so far.</p>
<div id="model-2-effect-of-fertility-and-relationship-status-on-religiosity" class="section level3">
<h3 class="hasAnchor">
<a href="#model-2-effect-of-fertility-and-relationship-status-on-religiosity" class="anchor"></a>Model #2: Effect of Fertility and Relationship status on Religiosity</h3>
<p>The authors compute a composite score of Religiosity by calculating the average of the three Religiosity items.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{multiverse default-m-4, inside = M}</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="at">df &lt;- df %&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="at">  mutate( RelComp = round((Rel1 + Rel2 + Rel3)/3, 2))</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p>The authors perform an ANOVA to study the effect of <em>Fertility</em>, <em>Relationship</em> and their interaction term, on the composite Religiosity score. We fit the linear model using the call: <code><a href="https://rdrr.io/r/stats/lm.html">lm( RelComp ~ Fertility * RelationshipStatus, data = df )</a></code> inside our multiverse and save the result to a variable called <code>fit_RelComp</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{multiverse default-m-5, inside = M, echo = FALSE}</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="at">fit_RelComp &lt;- lm( RelComp ~ Fertility * RelationshipStatus, data = df )</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p>To extract the results from the analysis, we first create a tidy data-frame of the results of the model, using <code><a href="https://generics.r-lib.org/reference/tidy.html">broom::tidy</a></code>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{multiverse default-m-6, inside = M}</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="at">summary_RelComp &lt;- fit_RelComp %&gt;% </span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="at">    broom::tidy( conf.int = TRUE )</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code></pre></div>
<p>Recall that declaring a variable in the multiverse only executes it in the default universe, and hence we need to call <code><a href="reference/execute.html">execute_multiverse()</a></code> to execute our analysis in each multiverse.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/execute.html">execute_multiverse</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span></code></pre></div>
<p>Now that we have performed the analysis in each universe of the multiverse, we need to plot the data. To plot the data, we need to extract the relevant result data-frame from each universe into a single data-frame. The following code does this, by extracting the variable where the estimates of the model are stored, <code>summary_RelComp</code> and creating a single tidy data-frame that can be accessed easily.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/accessors.html">expand</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">.code</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span> summary <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">.results</span>, <span class="st">"summary_RelComp"</span> <span class="op">)</span> <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">unnest</span><span class="op">(</span> cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">summary</span><span class="op">)</span> <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span> <span class="fl">10</span> <span class="op">)</span></code></pre></div>
<div class="kable-table">
<table class="table">
<colgroup>
<col width="3%">
<col width="7%">
<col width="6%">
<col width="4%">
<col width="4%">
<col width="4%">
<col width="21%">
<col width="11%">
<col width="13%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="right">.universe</th>
<th align="left">menstrual_calculation</th>
<th align="left">relationship_status</th>
<th align="left">cycle_length</th>
<th align="left">certainty</th>
<th align="left">fertile</th>
<th align="left">.parameter_assignment</th>
<th align="left">.results</th>
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option1</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option1</td>
<td align="left">&lt;environment: 0x7fb5fedc8bf0&gt;</td>
<td align="left">(Intercept)</td>
<td align="right">6.3749123</td>
<td align="right">0.4015673</td>
<td align="right">15.8750795</td>
<td align="right">0.0000000</td>
<td align="right">5.5859219</td>
<td align="right">7.1639027</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option1</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option1</td>
<td align="left">&lt;environment: 0x7fb5fedc8bf0&gt;</td>
<td align="left">Fertilitylow</td>
<td align="right">-1.1993860</td>
<td align="right">0.5312236</td>
<td align="right">-2.2577801</td>
<td align="right">0.0243951</td>
<td align="right">-2.2431222</td>
<td align="right">-0.1556497</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option1</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option1</td>
<td align="left">&lt;environment: 0x7fb5fedc8bf0&gt;</td>
<td align="left">Fertilitymedium</td>
<td align="right">-0.2931038</td>
<td align="right">0.5089591</td>
<td align="right">-0.5758887</td>
<td align="right">0.5649527</td>
<td align="right">-1.2930952</td>
<td align="right">0.7068877</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option1</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option1</td>
<td align="left">&lt;environment: 0x7fb5fedc8bf0&gt;</td>
<td align="left">RelationshipStatusSingle</td>
<td align="right">-1.4568301</td>
<td align="right">0.5358812</td>
<td align="right">-2.7185689</td>
<td align="right">0.0067871</td>
<td align="right">-2.5097176</td>
<td align="right">-0.4039426</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option1</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option1</td>
<td align="left">&lt;environment: 0x7fb5fedc8bf0&gt;</td>
<td align="left">Fertilitylow:RelationshipStatusSingle</td>
<td align="right">2.0287775</td>
<td align="right">0.7105383</td>
<td align="right">2.8552683</td>
<td align="right">0.0044810</td>
<td align="right">0.6327276</td>
<td align="right">3.4248273</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option1</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option1</td>
<td align="left">&lt;environment: 0x7fb5fedc8bf0&gt;</td>
<td align="left">Fertilitymedium:RelationshipStatusSingle</td>
<td align="right">1.0066406</td>
<td align="right">0.6873797</td>
<td align="right">1.4644608</td>
<td align="right">0.1437042</td>
<td align="right">-0.3439077</td>
<td align="right">2.3571890</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option2</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option2</td>
<td align="left">&lt;environment: 0x7fb5fedfb600&gt;</td>
<td align="left">(Intercept)</td>
<td align="right">6.3953846</td>
<td align="right">0.3741693</td>
<td align="right">17.0922227</td>
<td align="right">0.0000000</td>
<td align="right">5.6602251</td>
<td align="right">7.1305441</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option2</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option2</td>
<td align="left">&lt;environment: 0x7fb5fedfb600&gt;</td>
<td align="left">Fertilitylow</td>
<td align="right">-1.1692735</td>
<td align="right">0.4910353</td>
<td align="right">-2.3812412</td>
<td align="right">0.0176323</td>
<td align="right">-2.1340487</td>
<td align="right">-0.2044983</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option2</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option2</td>
<td align="left">&lt;environment: 0x7fb5fedfb600&gt;</td>
<td align="left">Fertilitymedium</td>
<td align="right">-0.2516346</td>
<td align="right">0.5161336</td>
<td align="right">-0.4875377</td>
<td align="right">0.6260936</td>
<td align="right">-1.2657225</td>
<td align="right">0.7624533</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">mc_option1</td>
<td align="left">rs_option1</td>
<td align="left">cl_option1</td>
<td align="left">cer_option1</td>
<td align="left">fer_option2</td>
<td align="left">mc_option1 , rs_option1 , cl_option1 , cer_option1, fer_option2</td>
<td align="left">&lt;environment: 0x7fb5fedfb600&gt;</td>
<td align="left">RelationshipStatusSingle</td>
<td align="right">-1.6535869</td>
<td align="right">0.4921908</td>
<td align="right">-3.3596461</td>
<td align="right">0.0008408</td>
<td align="right">-2.6206324</td>
<td align="right">-0.6865414</td>
</tr>
</tbody>
</table>
</div>
<p>We then take this data frame and plot the results as a confidence interval and point estimate using <code>ggplot2</code>. As you can see, this is similar to how you would plot a point estimate and confidence intervals for a regular analysis. We then use <code>gganimate</code> to animate through the results of each universe to quickly get an overview of the robustness of the results.</p>
<p>Note: we discuss extracting results from the multiverse and visualizing them in more detail in <code>vignette(visualising-multiverse)</code></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/accessors.html">expand</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span> summary <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">.results</span>, <span class="st">"summary_RelComp"</span><span class="op">)</span> <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">unnest</span><span class="op">(</span> cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">summary</span><span class="op">)</span> <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span> term <span class="op">=</span> <span class="fu">recode</span><span class="op">(</span> <span class="va">term</span>, 
                 <span class="st">"RelationshipStatusSingle"</span> <span class="op">=</span> <span class="st">"Single"</span>,
                 <span class="st">"Fertilitylow:RelationshipStatusSingle"</span> <span class="op">=</span> <span class="st">"Single:Fertility_low"</span>
  <span class="op">)</span> <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span> <span class="va">term</span> <span class="op">!=</span> <span class="st">"(Intercept)"</span> <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_vline</span><span class="op">(</span> xintercept <span class="op">=</span> <span class="fl">0</span>,  colour <span class="op">=</span> <span class="st">'#979797'</span> <span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">estimate</span>, y <span class="op">=</span> <span class="va">term</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_errorbarh</span><span class="op">(</span> <span class="fu">aes</span><span class="op">(</span>xmin <span class="op">=</span> <span class="va">conf.low</span>, xmax <span class="op">=</span> <span class="va">conf.high</span>, y <span class="op">=</span> <span class="va">term</span><span class="op">)</span>, height <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">transition_manual</span><span class="op">(</span> <span class="va">.universe</span> <span class="op">)</span>

<span class="fu">animate</span><span class="op">(</span><span class="va">p</span>, nframes <span class="op">=</span> <span class="fl">210</span>, fps <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/model-1-vis-1.gif" alt="results from a multiverse analysis: point estimates and 95% confidence intervals of the coefficients of the predictors fertility, single and their interaction term"></p>
</div>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>The authors also perform a number of other analysis using the same independent variables (<code>Fertility</code>, <code>Relationship Status</code> and their interaction term), but with different dependent variables: <code>Fiscal political attitudes</code>, <code>Social political attitudes</code>, <code>Voting preferences</code> and <code>Donation preferences</code>, which we omit here.</p>
<p>We also implement a series of other end-to-end multiverse implementations using this package to demonstrate how it might be used:</p>
<ul>
<li>Simonsohn et al.’s <a href="http://dx.doi.org/10.2139/ssrn.2694998">specification curve analysis</a> of the paper <a href="https://doi.org/10.1073/pnas.1402786111">Female hurricanes are deadlier than male hurricanes</a>
</li>
<li>Dragicevic et al.’s mini-paper <a href="https://explorablemultiverse.github.io/examples/dance/">Adding Inferential Information to plots using Resampling and Animations</a> (from <a href="https://hal.inria.fr/hal-01976951/document">Increasing the transparency of research papers with explorable multiverse analyses</a> )</li>
<li>Dragicevic et al.’s mini-paper <a href="https://explorablemultiverse.github.io/examples/frequentist/">Re-evaluating the efficiency of Physical Visualisations</a> (from <a href="https://hal.inria.fr/hal-01976951/document">Increasing the transparency of research papers with explorable multiverse analyses</a> )</li>
</ul>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=multiverse">https://​cloud.r-project.org/​package=multiverse</a>
</li>
<li>Browse source code at <br><a href="https://github.com/MUCollective/multiverse/">https://​github.com/​MUCollective/​multiverse/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/MUCollective/multiverse/issues/new">https://​github.com/​MUCollective/​multiverse/​issues/​new</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing multiverse</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://abhsarma.github.io">Abhraneel Sarma</a> <br><small class="roles"> Author, maintainer </small>  </li>
<li>Michael Moon <br><small class="roles"> Author </small>  </li>
<li>
<a href="http://www.mjskay.com">Matthew Kay</a> <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/MUCollective/multiverse/actions"><img src="https://github.com/MUCollective/multiverse/workflows/R-CMD-check/badge.svg?branch=dev" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/MUCollective/multiverse"><img src="https://codecov.io/gh/MUCollective/multiverse/branch/master/graph/badge.svg?token=LsJtjiw42J" alt="codecov"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://abhsarma.github.io">Abhraneel Sarma</a>, Michael Moon, <a href="http://www.mjskay.com">Matthew Kay</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
